# job_runs/flowmm_benchmark_alex/Snakefile
rule train_flowmm_alex:
    output:
        touch("sentinels/flowmm_benchmark_alex.trained")
    input:
        "sentinels/flowmm_env.created",
        "sentinels/alex_data.created",
        "sentinels/flowmm_yamls.created"
    shell:
        """
        sbatch --wait job_runs/flowmm_benchmark_alex/train_flowmm.job
        """

rule infer_flowmm_alex:
    output:
        touch("sentinels/flowmm_benchmark_alex.inferred")
    input:
        "sentinels/flowmm_env.created",
        "sentinels/alex_data.created",
        "sentinels/flowmm_benchmark_alex.trained",
        "sentinels/flowmm_yamls.created"
    shell:
        """
        sbatch --wait job_runs/flowmm_benchmark_alex/inference_flowmm.job
        """

rule benchmark_flowmm_alex:
    output:
        touch("sentinels/flowmm_benchmark_alex.final")
    input:
        "sentinels/flowmm_env.created",
        "sentinels/alex_data.created",
        "sentinels/flowmm_benchmark_alex.trained",
        "sentinels/flowmm_benchmark_alex.inferred",
        "sentinels/flowmm_yamls.created"
    shell:
        """
        bash job_runs/flowmm_benchmark_alex/write_benchmark.sh
        """

